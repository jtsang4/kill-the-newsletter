{{ define "feed.html" }}
<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ .Feed.Title }} ¬∑ Kill the Newsletter!</title>
    <link rel="icon" href="/favicon.ico" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: '#3b82f6',
              'primary-dark': '#2563eb',
              secondary: '#6b7280',
              background: '#ffffff',
              surface: '#f9fafb',
              border: '#e5e7eb',
              text: '#111827',
              'text-muted': '#6b7280',
              danger: '#ef4444',
              'danger-dark': '#dc2626'
            }
          }
        }
      }
    </script>
  </head>
  <body class="bg-background text-text min-h-screen">
    <div class="max-w-4xl mx-auto px-4 py-12 sm:px-6 lg:px-8">
      <header class="text-center mb-16">
        <h1 class="text-4xl font-bold text-text mb-4 tracking-tight">{{ .Feed.Title }}</h1>
        <p class="text-text-muted">Your newsletter feed is ready</p>
      </header>

      <main class="space-y-16">
        <div class="grid gap-8 md:grid-cols-2">
          <section class="bg-surface rounded-2xl p-8 border border-border">
            <h2 class="text-xl font-semibold text-text mb-4">üìß Email Address</h2>
            <p class="text-text-muted mb-4">Subscribe to newsletters with this email:</p>
            <div class="flex gap-2">
              <input
                type="text"
                value="{{ .Feed.PublicID }}@{{ .Hostname }}"
                readonly
                class="flex-1 px-4 py-3 border border-border rounded-lg bg-background text-text font-mono text-sm"
              />
              <button
                onclick="navigator.clipboard.writeText('{{ .Feed.PublicID }}@{{ .Hostname }}')"
                class="px-6 py-3 bg-primary text-white font-medium rounded-lg hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 transition-colors"
              >
                Copy
              </button>
            </div>
          </section>

          <section class="bg-surface rounded-2xl p-8 border border-border">
            <h2 class="text-xl font-semibold text-text mb-4">üì° Atom Feed</h2>
            <p class="text-text-muted mb-4">Subscribe in your feed reader:</p>
            <div class="flex gap-2">
              <input
                type="text"
                value="https://{{ .Hostname }}/feeds/{{ .Feed.PublicID }}.xml"
                readonly
                class="flex-1 px-4 py-3 border border-border rounded-lg bg-background text-text font-mono text-sm"
              />
              <button
                onclick="navigator.clipboard.writeText('https://{{ .Hostname }}/feeds/{{ .Feed.PublicID }}.xml')"
                class="px-6 py-3 bg-primary text-white font-medium rounded-lg hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 transition-colors"
              >
                Copy
              </button>
            </div>
          </section>
        </div>

        <div class="text-center">
          <a
            href="/"
            class="inline-flex items-center gap-2 px-6 py-3 text-text-muted hover:text-text transition-colors"
          >
            ‚Üê Create another feed
          </a>
        </div>

        <section class="bg-surface rounded-2xl p-8 border border-border">
          <h2 class="text-2xl font-semibold text-text mb-6">‚öôÔ∏è Feed Settings</h2>
          <form
            method="post"
            action=""
            onsubmit="event.preventDefault(); fetch('', { method: 'PATCH', body: new FormData(this) }).then(() => location.reload())"
            class="space-y-6"
          >
            <div>
              <label for="title" class="block text-sm font-medium text-text mb-2">Title</label>
              <input
                type="text"
                id="title"
                name="title"
                value="{{ .Feed.Title }}"
                required
                maxlength="200"
                class="w-full px-4 py-3 border border-border rounded-lg bg-background text-text placeholder:text-text-muted focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all"
              />
            </div>
            <div>
              <label for="icon" class="block text-sm font-medium text-text mb-2">Icon URL (optional)</label>
              <input
                type="text"
                id="icon"
                name="icon"
                placeholder="https://example.com/favicon.ico"
                maxlength="200"
                class="w-full px-4 py-3 border border-border rounded-lg bg-background text-text placeholder:text-text-muted focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all"
              />
            </div>
            <button
              type="submit"
              class="px-8 py-3 bg-primary text-white font-medium rounded-lg hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 transition-colors"
            >
              Update Feed Settings
            </button>
          </form>
        </section>

        <section class="bg-red-50 border border-red-200 rounded-2xl p-8">
          <h2 class="text-2xl font-semibold text-danger mb-4">üóëÔ∏è Delete Feed</h2>
          <p class="text-red-700 mb-6 font-medium">
            <strong>This action cannot be reverted! Your feed and all its entries will be lost!</strong>
          </p>
          <form
            method="post"
            action=""
            onsubmit="event.preventDefault(); fetch('', { method: 'DELETE' }).then(() => location.href = '/')"
          >
            <button
              type="submit"
              class="px-8 py-3 bg-danger text-white font-medium rounded-lg hover:bg-danger-dark focus:outline-none focus:ring-2 focus:ring-danger focus:ring-offset-2 transition-colors"
            >
              Delete Feed
            </button>
          </form>
        </section>
      </main>
    </div>
  </body>
</html>
{{ end }}
